window.REBASE=window.REBASE||{},REBASE.theme={},REBASE.theme.collection={},function(t){t(function(){function e(t){t=t.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var e=new RegExp("[\\?&]"+t+"=([^&#]*)"),o=e.exec(location.search);return null===o?"":decodeURIComponent(o[1])}function o(){location.search&&Object.keys(REBASE.theme.collection.productFilters).forEach(function(o){var i=e(o);i&&(REBASE.theme.collection.productFilters[o]=i.split(","),REBASE.theme.collection.productFilters[o].forEach(function(e){t('.filtering-list li[data-group="'+o+'"][data-value="'+e+'"]').toggleClass("selected")}))})}function i(){var t=Object.keys(REBASE.theme.collection.productFilters).map(function(t){var e="";return e=REBASE.theme.collection.productFilters[t].length?t+"="+encodeURIComponent(REBASE.theme.collection.productFilters[t].join(",")):null,e});""!==REBASE.theme.collection.sortKey&&t.push("sort_by="+REBASE.theme.collection.sortKey),t=t.filter(function(t){return null!==t}),history.pushState({},"","?"+t.join("&"))}function l(t,e){var o=!1;return t.length>=2?parseInt(e).between(parseInt(t[0]),parseInt(t[1]))&&(o=!0):parseInt(e)<parseInt(t[0])&&(o=!0),o}function n(){return REBASE.theme.collection.filteredProductList=REBASE.theme.collection.originalProductList.filter(function(e,o){var i=t(o),n=!0;for(var c in REBASE.theme.collection.productFilters)if(REBASE.theme.collection.productFilters[c].length){var r=i.data(c).toString().split(","),s=REBASE.theme.collection.productFilters[c].some(function(t){if("price"==c){var e=t.toString().split("-"),o=!1;return r.forEach(function(t){l(e,t)&&(o=!0)}),o}return"bait"===c?REBASE.theme.collection.productFilters[c].every(function(t){return r.indexOf(t.toString())>=0}):r.indexOf(t.toString())>=0});if(!s){n=!1;break}}return n}),REBASE.theme.collection.filteredProductList.length!==REBASE.theme.collection.originalProductList.length&&(REBASE.theme.collection.productListHasBeenFiltered=!0),REBASE.theme.collection.productListHasBeenFiltered&&t(".products").fadeOut(100,function(){t(".products").html(REBASE.theme.collection.filteredProductList.length<=0?REBASE.theme.collection.noneFoundHTML:REBASE.theme.collection.filteredProductList),t(this).fadeIn(200)}),REBASE.theme.collection.filteredProductList.length}function c(){var e=t(".filtering-list-items li");e.addClass("disabled"),e.each(function(e,o){var i=t(o),n=i.data("group"),c=i.data("value").toString();i.hasClass("selected")&&i.removeClass("disabled"),REBASE.theme.collection.filteredProductList.each(function(e,o){var r=t(o),s=r.data(n);"price"==n?l(c.trim().toString().split("-"),s)&&i.removeClass("disabled"):("number"==typeof s&&s.toString()===c||"string"==typeof s&&s.includes(c))&&i.removeClass("disabled")})})}function r(){var t=!1;for(var e in REBASE.theme.collection.productFilters)if(REBASE.theme.collection.productFilters[e].length){t=!0;break}return t}function s(){REBASE.theme.collection.productFilters={bait:[],"lure-line-wt":[],structure:[],"cast-or-spin":[],power:[],length:[],price:[]},t(".filtering-list-items li").toggleClass("selected",!1),i(),n(),c(),t(".clear-filtering-selections button").attr("disabled",!r())}t(document).on("click",".collection-header__filtering-toggle",function(e){var o=t(this).find("span");"Help Me Choose"===o.text()?o.text("Close"):o.text("Help Me Choose"),t(".collection-sidebar").slideToggle()}),t(document).on("click",".filtering-list-item-toggle",function(e){var o=t(this),i=o.find("span");"+"==i.html()?i.html("&minus;"):i.html("&plus;"),o.next().slideToggle()}),REBASE.theme.collection.noneFoundHTML=t("#no-product-found-message").html(),REBASE.theme.collection.originalProductList=t(".product"),REBASE.theme.collection.filteredProductList=[],REBASE.theme.collection.productListHasBeenFiltered=!1,REBASE.theme.collection.sortKey=e("sort_by"),REBASE.theme.collection.productFilters={bait:[],"lure-line-wt":[],structure:[],"cast-or-spin":[],power:[],length:[],price:[],series:[]},Number.prototype.between=function(t,e){var o=Math.min.apply(Math,[t,e]),i=Math.max.apply(Math,[t,e]);return this>o&&this<i},t(document).on("click",".filtering-list-items li",function(e){e.preventDefault();var o=t(this),l=o.data("group"),s=o.data("value").toString();if(o.hasClass("disabled"))return!1;o.toggleClass("selected"),REBASE.theme.collection.productFilters[l].includes(s)?REBASE.theme.collection.productFilters[l]=REBASE.theme.collection.productFilters[l].filter(function(t){return s!==t}):REBASE.theme.collection.productFilters[l].push(s),i(),n(),c(),t(".clear-filtering-selections button").attr("disabled",!r())}),t(document).on("click",".clear-filtering-selections",s),t(document).on("collection_sort_by_change",i),o(),n(),c()})}(jQuery);